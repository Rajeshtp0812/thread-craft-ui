<p-accordion [activeIndex]="0">
    <p-accordionTab header="Billing Information">
        <div class="p-fluid p-formgrid grid">
            <div class="col-12 md:col-6">
                <label htmlFor="email">Client</label>
                <p-dropdown [options]="[]" [filter]="true"></p-dropdown>
            </div>
            <div class="col-12 md:col-6">
                <label htmlFor="contact">Invoice Number</label>
                <input pInputText id="contact" type="text" />
            </div>
        </div>
    </p-accordionTab>
    <p-accordionTab header="Shipping Details">
        <div class="p-fluid p-formgrid grid">
            <div class="col-12 md:col-6">
                <label htmlFor="email">Transportation Type</label>
                <input pInputText id="transportationType" type="text" />
            </div>
            <div class="col-12 md:col-6">
                <label htmlFor="contact">Date of supply</label>
                <p-calendar appendTo="body" dateFormat="dd.mm.yy"></p-calendar>
            </div>
            <div class="col-12">
                <label htmlFor="address">Address</label>
                <input pInputTextarea id="address" rows="4" />
            </div>
            <div class="col-12 md:col-6">
                <label htmlFor="city">State</label>
                <p-dropdown
                    [options]="statesOptions"
                    (onChange)="selectState($event)"
                    [filter]="true"
                ></p-dropdown>
            </div>
            <div class="col-12 md:col-6">
                <label htmlFor="state">City</label>
                <p-dropdown
                    [options]="citiesOptions"
                    [(ngModel)]="selectedCity"
                    [filter]="true"
                    [disabled]="!citiesOptions?.length"
                ></p-dropdown>
            </div>
        </div>
    </p-accordionTab>
    <p-accordionTab header="Itemized List">
        <p-table
            [value]="products"
            dataKey="id"
            editMode="row"
            [tableStyle]="{ 'min-width': '50rem' }"
        >
            <ng-template pTemplate="header">
                <tr>
                    <th style="width: 20%">Code</th>
                    <th style="width: 20%">Description</th>
                    <th style="width: 20%">HSN</th>
                    <th style="width: 20%">Rate</th>
                    <th style="width: 20%">Quantity</th>
                    <th style="width: 20%">Amount</th>
                    <th style="width: 20%"></th>
                </tr>
            </ng-template>
            <ng-template
                pTemplate="body"
                let-product
                let-editing="editing"
                let-ri="rowIndex"
            >
                <tr [pEditableRow]="product">
                    <td>
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input
                                    pInputText
                                    type="text"
                                    [(ngModel)]="product.code"
                                />
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{ product.code }}
                            </ng-template>
                        </p-cellEditor>
                    </td>
                    <td>
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input
                                    pInputText
                                    type="text"
                                    [(ngModel)]="product.name"
                                    required
                                />
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{ product.name }}
                            </ng-template>
                        </p-cellEditor>
                    </td>
                    <td>
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input
                                    pInputText
                                    type="text"
                                    [(ngModel)]="product.name"
                                    required
                                />
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{ product.name }}
                            </ng-template>
                        </p-cellEditor>
                    </td>
                    <td>
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input
                                    pInputText
                                    type="text"
                                    [(ngModel)]="product.name"
                                    required
                                />
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{ product.name }}
                            </ng-template>
                        </p-cellEditor>
                    </td>
                    <td>
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <p-dropdown
                                    [options]="statuses"
                                    appendTo="body"
                                    [(ngModel)]="product.inventoryStatus"
                                    [style]="{ width: '100%' }"
                                ></p-dropdown>
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{ product.inventoryStatus }}
                            </ng-template>
                        </p-cellEditor>
                    </td>
                    <td>
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input
                                    pInputText
                                    type="text"
                                    [(ngModel)]="product.price"
                                />
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{ product.price | currency : "USD" }}
                            </ng-template>
                        </p-cellEditor>
                    </td>
                    <td>
                        <div
                            class="flex align-items-center justify-content-center gap-2"
                        >
                            <button
                                *ngIf="!editing"
                                pButton
                                pRipple
                                type="button"
                                pInitEditableRow
                                icon="pi pi-pencil"
                                (click)="onRowEditInit(product)"
                                class="p-button-rounded p-button-text"
                            ></button>
                            <button
                                *ngIf="editing"
                                pButton
                                pRipple
                                type="button"
                                pSaveEditableRow
                                icon="pi pi-check"
                                (click)="onRowEditSave(product)"
                                class="p-button-rounded p-button-text p-button-success mr-2"
                            ></button>
                            <button
                                *ngIf="editing"
                                pButton
                                pRipple
                                type="button"
                                pCancelEditableRow
                                icon="pi pi-times"
                                (click)="onRowEditCancel(product, ri)"
                                class="p-button-rounded p-button-text p-button-danger"
                            ></button>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-accordionTab>
</p-accordion>
